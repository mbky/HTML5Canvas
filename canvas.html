<!DOCTYPE html> <html> <body>

<p id="demo"></p>

<form id = "params">
Amplitude: <input type="number" name="amp" min="50" max="150"><t>
Frequency: <input type="number" name="freq" min="1" max="1000"><br>
Envelope Freq: <input type="number" name="envfreq" min="1" max="40"><t>
Show Waveform: <input type="checkbox" name="animate" value="myvalue"><br>
</form>

<canvas id = "myCanvas" width = "800" height = "300"
style = "border:10px solid #0000FF;" > Your browser does not support the HTML5 canvas tag.
</canvas>

<form>
</form>

<script>

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.fillStyle='rgb(0,0,255)';

var resolution = 100;
var myVar=setInterval(function(){moveWave()},resolution);

var debug = document.getElementById("demo");
var amp = document.getElementById("params").amp;
var freq = document.getElementById("params").freq;
var envfreq = document.getElementById("params").envfreq;
var animate = document.getElementById("params").animate;

var beta = 0;
var ff = 0;
var AdjustFreq = AdjustFreqDec;
var envelope =1 ;

amp.value = 100;
freq.value = 12;
envfreq.value = 1.0;
animate.checked = true;

function moveWave()
{
	var A, f, f_env, twopi = 2*Math.PI;
	
	A = parseInt(amp.value);
	f = parseInt(freq.value);
	f_env = parseFloat(envfreq.value);
	beta = ((beta+12)%800);
	
	if (animate.checked)
	{
		ctx.clearRect(0,0,800,300);
		
		for (var t = 0; t < 800*resolution; t++)
		{
			envelope = Math.sin(twopi*f_env*(1+ff)*(t+400)/800);	
			ctx.fillRect(t, A*envelope*Math.sin(twopi*f*(t-beta)/800) + 150, 2, 2);
		}
		
		ctx.stroke();
	}
}

function AdjustFreqInc()
{
	if ((ff+=0.05) > 1.25) AdjustFreq = AdjustFreqDec;
}

function AdjustFreqDec()
{
	if ((ff-=0.05) < -0.25) AdjustFreq = AdjustFreqInc;
}		

</script>

</body> 
</html>
