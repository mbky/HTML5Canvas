<!DOCTYPE html> <html> <body>

<p id="demo"></p>

<canvas id = "myCanvas" width = "800" height = "300"
style = "border:10px solid #0000FF;" > Your browser does not support the HTML5 canvas tag.
</canvas>

<form id = "params">
Amplitude: <input type="number" name="amp" min="50" max="150"><br>
Frequency: <input type="number" name="freq" min="1" max="1000"><br>
Envelope Amp: <input type="number" name="envamp" min="1" max="40"><br>
</form>

<form>
Checkbox: <input type="checkbox" id="myCheck" value="myvalue">
</form>

<script>

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
var beta = 0;
var f = 20;
var updatePeriod = 100;
var myVar=setInterval(function(){moveWave()},updatePeriod);
var freqAdjuster = adjustFreqDec;
var resolution = 100;

var amp = document.getElementById("params").amp;
var freq = document.getElementById("params").freq;
var envamp = document.getElementById("params").envamp;
var moveTheWave = document.getElementById("myCheck");
var debug = document.getElementById("demo");
var z = 0;
amp.value = 125;
freq.value = 5;
envamp.value = 1;

function moveWave()
{
	var A, envelope, angle, pi = Math.PI;
	
	A = parseInt(amp.value);
	f = parseInt(freq.value);
	beta+=12;
	
	z++;
	
	//debug.innerHTML = moveTheWave.checked.toString() +z.toString();
	if (moveTheWave.checked == true)
	{
		ctx.clearRect(0,0,800,300);
		for (t = 0; t < 800*resolution; t++)
		{
			//envelope = Math.sin((1*resolution)*(t+200-beta/2)*2*pi/(800*resolution));		
			//envelope /= parseFloat(envamp.value);		
			envelope = 1;
			angle = t - beta;
			ctx.fillStyle='rgb(0,0,255)'; 
			ctx.fillRect(t, A*envelope*Math.sin((f*resolution)*angle*2*pi/(800*resolution)) + 150, 2, 2);
		}
		//freqAdjuster();
		ctx.stroke();
	}
}

function adjustFreqInc()
{
	var ff = parseFloat(freq.value);
	ff += 0.1;
	if (ff > 22)
		freqAdjuster = adjustFreqDec;
	
	freq.value = ff;	
}

function adjustFreqDec()
{
	var ff = parseFloat(freq.value);
	ff -= 0.1;
	if (ff < 18)
		freqAdjuster = adjustFreqInc;

	freq.value = ff;
}

</script>

</body> 
</html>
